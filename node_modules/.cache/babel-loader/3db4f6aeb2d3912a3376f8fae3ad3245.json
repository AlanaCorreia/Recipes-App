{"ast":null,"code":"var _jsxFileName = \"/home/alana/Trybe/Turma-17/projetos/Recipes-App/src/pages/FoodsById.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport MyContext from '../context/myContext';\nimport getIngredientsAndMeasure from '../helpers/getIngredientsAndMeasure';\nimport fetchFoodApi from '../services/fetchApiFood';\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport '../DetailsPage.css';\nimport { checkRecipeFavorite, removeFavoriteRecipe, setStorageFavoriteFood } from '../helpers/localStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst copy = require('clipboard-copy');\n\nfunction FoodsById() {\n  _s();\n\n  const history = useHistory();\n  const {\n    location: {\n      pathname\n    }\n  } = history;\n  const [recipeFood, setRecipeFood] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const [measure, setMeasure] = useState([]);\n  const [checkCopy, setCheckCopy] = useState(false);\n  const [checkFavorite, setCheckFavorite] = useState(false);\n  const {\n    drinkRecommendation\n  } = useContext(MyContext);\n  const id = pathname.replace(/[^0-9]/g, '');\n\n  async function getFetchFoodApi() {\n    const resultsApi = await fetchFoodApi(`lookup.php?i=${id}`);\n    setRecipeFood(resultsApi.meals);\n    const ingredientsReturn = getIngredientsAndMeasure('9', '29', resultsApi.meals);\n    setIngredients(ingredientsReturn.filter(element => element[0].includes('strIngredient') && element[1] !== null && element[1] !== ''));\n    const measuresReturn = getIngredientsAndMeasure('29', '48', resultsApi.meals);\n    setMeasure(measuresReturn.filter(element => element[1] !== ' '));\n  }\n\n  function checkIsFavorite() {\n    setCheckFavorite(checkRecipeFavorite(id));\n  }\n\n  useEffect(() => {\n    getFetchFoodApi();\n    checkIsFavorite();\n  }, []);\n\n  function getVideo(url) {\n    const splitedUrl = url.split('v=')[1];\n    const videoUrl = `https://www.youtube.com/embed/${splitedUrl}`;\n    return videoUrl;\n  }\n\n  const redirectClick = idRecipe => {\n    history.push(`/foods/${idRecipe}/in-progress`);\n  };\n\n  function checkRecipe() {\n    const recipeName = recipeFood.length > 0 ? recipeFood[0].strMeal : '';\n    const inProgressStorage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const doneRecipeStorage = JSON.parse(localStorage.getItem('doneRecipes'));\n\n    if (doneRecipeStorage !== null) {\n      const filterDoneRecipe = doneRecipeStorage.filter(_ref => {\n        let {\n          name\n        } = _ref;\n        return name === recipeName;\n      });\n\n      if (filterDoneRecipe.length > 0) {\n        return '';\n      }\n    }\n\n    if (inProgressStorage && inProgressStorage.meals && inProgressStorage.meals[id]) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        \"data-testid\": \"start-recipe-btn\",\n        type: \"button\",\n        onClick: () => redirectClick(id),\n        className: \"button-recipe button-continue\",\n        children: \"Continue Recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      \"data-testid\": \"start-recipe-btn\",\n      type: \"button\",\n      onClick: () => redirectClick(id),\n      className: \"button-recipe button-start\",\n      children: \"Start recipe\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n\n  function handleClick(idReceita) {\n    history.push(`/drinks/${idReceita}`);\n  }\n\n  function clipboardCopy(idLink) {\n    copy(`http://localhost:3000/foods/${idLink}`);\n    setCheckCopy(true);\n  }\n\n  function clickFavorite() {\n    if (checkFavorite) {\n      setCheckFavorite(false);\n      removeFavoriteRecipe(id);\n    } else {\n      setCheckFavorite(true);\n      setStorageFavoriteFood(recipeFood[0]);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"details-page-default\",\n    children: recipeFood && recipeFood.map(recipe => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        \"data-testid\": \"recipe-photo\",\n        src: recipe.strMealThumb,\n        alt: recipe.strMeal,\n        className: \"img-recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-details-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title-recipe\",\n          \"data-testid\": \"recipe-title\",\n          children: recipe.strMeal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            \"data-testid\": \"share-btn\",\n            type: \"button\",\n            className: \"icon-btn\",\n            onClick: () => clipboardCopy(recipe.idMeal),\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: shareIcon,\n              alt: \"share Icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"icon-btn\",\n            onClick: clickFavorite,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              \"data-testid\": \"favorite-btn\",\n              src: checkFavorite ? blackHeartIcon : whiteHeartIcon,\n              alt: checkFavorite ? 'black Heart Icon\"' : 'white Heart Icon'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"details-recipe-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"category\",\n          \"data-testid\": \"recipe-category\",\n          children: recipe.strCategory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), checkCopy && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Link copied!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"subtitles-recipe\",\n          children: \"Ingredients:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"ingredients-list\",\n          children: ingredients.length > 0 && measure.length > 0 && ingredients.map((element, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            \"data-testid\": `${index}-ingredient-name-and-measure`,\n            children: ['- ', /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ingredient-text\",\n              children: element[1]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 23\n            }, this), ' ', measure[index] !== null && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"measure-text\",\n              children: measure[index][1]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 26\n            }, this)]\n          }, Math.random(), true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"subtitles-recipe\",\n          children: \"Instructions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"instructions-container\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"instructions\",\n            className: \"instructions-text\",\n            children: recipe.strInstructions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n          \"data-testid\": \"video\",\n          src: getVideo(recipe.strYoutube),\n          title: recipe.idMeal,\n          width: \"340\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"subtitles-recipe\",\n          children: \"Recommended\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recommended-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"recommended-cards-container\",\n            children: drinkRecommendation.map((drink, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              \"data-testid\": `${index}-recomendation-card` // link referencia: https://stackoverflow.com/questions/56441825/how-to-fix-button-interactive-role-must-be-focusable\n              ,\n              onClick: () => handleClick(drink.idDrink),\n              onKeyDown: handleClick,\n              role: \"button\",\n              tabIndex: 0,\n              className: \"recommended-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"recommended-img\",\n                \"data-testid\": `${index}-card-img`,\n                src: drink.strDrinkThumb,\n                alt: drink.strDrink\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"recommended-category-text\",\n                children: drink.strAlcoholic\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"recommended-text\",\n                \"data-testid\": `${index}-recomendation-title`,\n                children: [' ', drink.strDrink]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 21\n              }, this)]\n            }, drink.strDrink, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this), checkRecipe()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this)]\n    }, recipe.idMeal, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n_s(FoodsById, \"fak/sLbCRaziNEfEz/Pv5/eF9rU=\", false, function () {\n  return [useHistory];\n});\n\n_c = FoodsById;\nexport default FoodsById;\n\nvar _c;\n\n$RefreshReg$(_c, \"FoodsById\");","map":{"version":3,"sources":["/home/alana/Trybe/Turma-17/projetos/Recipes-App/src/pages/FoodsById.js"],"names":["React","useState","useEffect","useContext","useHistory","MyContext","getIngredientsAndMeasure","fetchFoodApi","shareIcon","whiteHeartIcon","blackHeartIcon","checkRecipeFavorite","removeFavoriteRecipe","setStorageFavoriteFood","copy","require","FoodsById","history","location","pathname","recipeFood","setRecipeFood","ingredients","setIngredients","measure","setMeasure","checkCopy","setCheckCopy","checkFavorite","setCheckFavorite","drinkRecommendation","id","replace","getFetchFoodApi","resultsApi","meals","ingredientsReturn","filter","element","includes","measuresReturn","checkIsFavorite","getVideo","url","splitedUrl","split","videoUrl","redirectClick","idRecipe","push","checkRecipe","recipeName","length","strMeal","inProgressStorage","JSON","parse","localStorage","getItem","doneRecipeStorage","filterDoneRecipe","name","handleClick","idReceita","clipboardCopy","idLink","clickFavorite","map","recipe","strMealThumb","idMeal","strCategory","index","Math","random","strInstructions","strYoutube","drink","idDrink","strDrinkThumb","strDrink","strAlcoholic"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,wBAAP,MAAqC,qCAArC;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAO,oBAAP;AACA,SAASC,mBAAT,EAA8BC,oBAA9B,EACEC,sBADF,QACgC,yBADhC;;;AAGA,MAAMC,IAAI,GAAGC,OAAO,CAAC,gBAAD,CAApB;;AAEA,SAASC,SAAT,GAAqB;AAAA;;AACnB,QAAMC,OAAO,GAAGb,UAAU,EAA1B;AACA,QAAM;AAAEc,IAAAA,QAAQ,EAAE;AAAEC,MAAAA;AAAF;AAAZ,MAA6BF,OAAnC;AACA,QAAM,CAACG,UAAD,EAAaC,aAAb,IAA8BpB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACqB,WAAD,EAAcC,cAAd,IAAgCtB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACuB,OAAD,EAAUC,UAAV,IAAwBxB,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAM,CAACyB,SAAD,EAAYC,YAAZ,IAA4B1B,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC2B,aAAD,EAAgBC,gBAAhB,IAAoC5B,QAAQ,CAAC,KAAD,CAAlD;AAEA,QAAM;AAAE6B,IAAAA;AAAF,MAA0B3B,UAAU,CAACE,SAAD,CAA1C;AAEA,QAAM0B,EAAE,GAAGZ,QAAQ,CAACa,OAAT,CAAiB,SAAjB,EAA4B,EAA5B,CAAX;;AAEA,iBAAeC,eAAf,GAAiC;AAC/B,UAAMC,UAAU,GAAG,MAAM3B,YAAY,CAAE,gBAAewB,EAAG,EAApB,CAArC;AACAV,IAAAA,aAAa,CAACa,UAAU,CAACC,KAAZ,CAAb;AACA,UAAMC,iBAAiB,GAAG9B,wBAAwB,CAAC,GAAD,EAAM,IAAN,EAAY4B,UAAU,CAACC,KAAvB,CAAlD;AACAZ,IAAAA,cAAc,CAACa,iBAAiB,CAC7BC,MADY,CACJC,OAAD,IAAaA,OAAO,CAAC,CAAD,CAAP,CAAWC,QAAX,CAAoB,eAApB,KACpBD,OAAO,CAAC,CAAD,CAAP,KAAe,IADK,IACGA,OAAO,CAAC,CAAD,CAAP,KAAe,EAF1B,CAAD,CAAd;AAGA,UAAME,cAAc,GAAGlC,wBAAwB,CAAC,IAAD,EAAO,IAAP,EAAa4B,UAAU,CAACC,KAAxB,CAA/C;AACAV,IAAAA,UAAU,CAACe,cAAc,CAACH,MAAf,CAAuBC,OAAD,IAAaA,OAAO,CAAC,CAAD,CAAP,KAAe,GAAlD,CAAD,CAAV;AACD;;AAED,WAASG,eAAT,GAA2B;AACzBZ,IAAAA,gBAAgB,CAAClB,mBAAmB,CAACoB,EAAD,CAApB,CAAhB;AACD;;AAED7B,EAAAA,SAAS,CAAC,MAAM;AACd+B,IAAAA,eAAe;AAEfQ,IAAAA,eAAe;AAChB,GAJQ,EAIN,EAJM,CAAT;;AAMA,WAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,UAAMC,UAAU,GAAGD,GAAG,CAACE,KAAJ,CAAU,IAAV,EAAgB,CAAhB,CAAnB;AACA,UAAMC,QAAQ,GAAI,iCAAgCF,UAAW,EAA7D;AACA,WAAOE,QAAP;AACD;;AAED,QAAMC,aAAa,GAAIC,QAAD,IAAc;AAClC/B,IAAAA,OAAO,CAACgC,IAAR,CAAc,UAASD,QAAS,cAAhC;AACD,GAFD;;AAGA,WAASE,WAAT,GAAuB;AACrB,UAAMC,UAAU,GAAG/B,UAAU,CAACgC,MAAX,GAAoB,CAApB,GAAwBhC,UAAU,CAAC,CAAD,CAAV,CAAciC,OAAtC,GAAgD,EAAnE;AACA,UAAMC,iBAAiB,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAX,CAA1B;AACA,UAAMC,iBAAiB,GAAGJ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAA1B;;AAEA,QAAIC,iBAAiB,KAAK,IAA1B,EAAgC;AAC9B,YAAMC,gBAAgB,GAAGD,iBAAiB,CAACtB,MAAlB,CAAyB;AAAA,YAAC;AAAEwB,UAAAA;AAAF,SAAD;AAAA,eAChDA,IAAI,KAAKV,UADuC;AAAA,OAAzB,CAAzB;;AAEA,UAAIS,gBAAgB,CAACR,MAAjB,GAA0B,CAA9B,EAAiC;AAC/B,eAAO,EAAP;AACD;AACF;;AAED,QAAIE,iBAAiB,IAAIA,iBAAiB,CAACnB,KAAvC,IAAgDmB,iBAAiB,CAACnB,KAAlB,CAAwBJ,EAAxB,CAApD,EAAiF;AAC/E,0BACE;AACE,uBAAY,kBADd;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,OAAO,EAAG,MAAMgB,aAAa,CAAChB,EAAD,CAH/B;AAIE,QAAA,SAAS,EAAC,+BAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAUD;;AAED,wBACE;AACE,qBAAY,kBADd;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAG,MAAMgB,aAAa,CAAChB,EAAD,CAH/B;AAIE,MAAA,SAAS,EAAC,4BAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAUD;;AAED,WAAS+B,WAAT,CAAqBC,SAArB,EAAgC;AAC9B9C,IAAAA,OAAO,CAACgC,IAAR,CAAc,WAAUc,SAAU,EAAlC;AACD;;AAED,WAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC7BnD,IAAAA,IAAI,CAAE,+BAA8BmD,MAAO,EAAvC,CAAJ;AACAtC,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;;AAED,WAASuC,aAAT,GAAyB;AACvB,QAAItC,aAAJ,EAAmB;AACjBC,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAjB,MAAAA,oBAAoB,CAACmB,EAAD,CAApB;AACD,KAHD,MAGO;AACLF,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAhB,MAAAA,sBAAsB,CAACO,UAAU,CAAC,CAAD,CAAX,CAAtB;AACD;AACF;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA,cACGA,UAAU,IAAIA,UAAU,CAAC+C,GAAX,CAAgBC,MAAD,iBAC5B;AAAA,8BACE;AACE,uBAAY,cADd;AAEE,QAAA,GAAG,EAAGA,MAAM,CAACC,YAFf;AAGE,QAAA,GAAG,EAAGD,MAAM,CAACf,OAHf;AAIE,QAAA,SAAS,EAAC;AAJZ;AAAA;AAAA;AAAA;AAAA,cADF,eAOE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,cAAd;AAA6B,yBAAY,cAAzC;AAAA,oBACGe,MAAM,CAACf;AADV;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAA,kCACE;AACE,2BAAY,WADd;AAEE,YAAA,IAAI,EAAC,QAFP;AAGE,YAAA,SAAS,EAAC,UAHZ;AAIE,YAAA,OAAO,EAAG,MAAMW,aAAa,CAACI,MAAM,CAACE,MAAR,CAJ/B;AAAA,mCAME;AAAK,cAAA,GAAG,EAAG9D,SAAX;AAAuB,cAAA,GAAG,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,kBADF,eASE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,SAAS,EAAC,UAFZ;AAGE,YAAA,OAAO,EAAG0D,aAHZ;AAAA,mCAKE;AACE,6BAAY,cADd;AAEE,cAAA,GAAG,EAAGtC,aAAa,GACflB,cADe,GACED,cAHvB;AAIE,cAAA,GAAG,EAAGmB,aAAa,GACf,mBADe,GACO;AAL5B;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,eAmCE;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC,UAAb;AAAwB,yBAAY,iBAApC;AAAA,oBACGwC,MAAM,CAACG;AADV;AAAA;AAAA;AAAA;AAAA,gBADF,EAII7C,SAAS,iBAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJlB,eAKE;AAAI,UAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,eAME;AAAI,UAAA,SAAS,EAAC,kBAAd;AAAA,oBACGJ,WAAW,CAAC8B,MAAZ,GAAqB,CAArB,IAA0B5B,OAAO,CAAC4B,MAAR,GAAiB,CAA3C,IACM9B,WAAW,CAAC6C,GAAZ,CAAgB,CAAC7B,OAAD,EAAUkC,KAAV,kBACjB;AAEE,2BAAe,GAAEA,KAAM,8BAFzB;AAAA,uBAIG,IAJH,eAKE;AAAM,cAAA,SAAS,EAAC,iBAAhB;AAAA,wBAAmClC,OAAO,CAAC,CAAD;AAA1C;AAAA;AAAA;AAAA;AAAA,oBALF,EAMG,GANH,EAOId,OAAO,CAACgD,KAAD,CAAP,KAAmB,IAAnB,iBACC;AAAM,cAAA,SAAS,EAAC,cAAhB;AAAA,wBAAgChD,OAAO,CAACgD,KAAD,CAAP,CAAe,CAAf;AAAhC;AAAA;AAAA;AAAA;AAAA,oBARL;AAAA,aACQC,IAAI,CAACC,MAAL,EADR;AAAA;AAAA;AAAA;AAAA,kBADC;AAFT;AAAA;AAAA;AAAA;AAAA,gBANF,eAqBE;AAAI,UAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBF,eAsBE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA,iCACE;AAAG,2BAAY,cAAf;AAA8B,YAAA,SAAS,EAAC,mBAAxC;AAAA,sBACGN,MAAM,CAACO;AADV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAtBF,eA2BE;AACE,yBAAY,OADd;AAEE,UAAA,GAAG,EAAGjC,QAAQ,CAAC0B,MAAM,CAACQ,UAAR,CAFhB;AAGE,UAAA,KAAK,EAAGR,MAAM,CAACE,MAHjB;AAIE,UAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,gBA3BF,eAiCE;AAAI,UAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAjCF,eAkCE;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,6BAAf;AAAA,sBACIxC,mBAAmB,CAACqC,GAApB,CAAwB,CAACU,KAAD,EAAQL,KAAR,kBACxB;AAEE,6BAAe,GAAEA,KAAM,qBAFzB,CAGE;AAHF;AAIE,cAAA,OAAO,EAAG,MAAMV,WAAW,CAACe,KAAK,CAACC,OAAP,CAJ7B;AAKE,cAAA,SAAS,EAAGhB,WALd;AAME,cAAA,IAAI,EAAC,QANP;AAOE,cAAA,QAAQ,EAAG,CAPb;AAQE,cAAA,SAAS,EAAC,kBARZ;AAAA,sCAUE;AACE,gBAAA,SAAS,EAAC,iBADZ;AAEE,+BAAe,GAAEU,KAAM,WAFzB;AAGE,gBAAA,GAAG,EAAGK,KAAK,CAACE,aAHd;AAIE,gBAAA,GAAG,EAAGF,KAAK,CAACG;AAJd;AAAA;AAAA;AAAA;AAAA,sBAVF,eAgBE;AAAG,gBAAA,SAAS,EAAC,2BAAb;AAAA,0BAA0CH,KAAK,CAACI;AAAhD;AAAA;AAAA;AAAA;AAAA,sBAhBF,eAiBE;AACE,gBAAA,SAAS,EAAC,kBADZ;AAEE,+BAAe,GAAET,KAAM,sBAFzB;AAAA,2BAIG,GAJH,EAKIK,KAAK,CAACG,QALV;AAAA;AAAA;AAAA;AAAA;AAAA,sBAjBF;AAAA,eACQH,KAAK,CAACG,QADd;AAAA;AAAA;AAAA;AAAA,oBADA;AADJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAlCF,EAiEI9B,WAAW,EAjEf;AAAA;AAAA;AAAA;AAAA;AAAA,cAnCF;AAAA,OAAWkB,MAAM,CAACE,MAAlB;AAAA;AAAA;AAAA;AAAA,YADa;AADjB;AAAA;AAAA;AAAA;AAAA,UADF;AA6GD;;GAlNQtD,S;UACSZ,U;;;KADTY,S;AAmNT,eAAeA,SAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport MyContext from '../context/myContext';\nimport getIngredientsAndMeasure from '../helpers/getIngredientsAndMeasure';\nimport fetchFoodApi from '../services/fetchApiFood';\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport '../DetailsPage.css';\nimport { checkRecipeFavorite, removeFavoriteRecipe,\n  setStorageFavoriteFood } from '../helpers/localStorage';\n\nconst copy = require('clipboard-copy');\n\nfunction FoodsById() {\n  const history = useHistory();\n  const { location: { pathname } } = history;\n  const [recipeFood, setRecipeFood] = useState([]);\n  const [ingredients, setIngredients] = useState([]);\n  const [measure, setMeasure] = useState([]);\n\n  const [checkCopy, setCheckCopy] = useState(false);\n  const [checkFavorite, setCheckFavorite] = useState(false);\n\n  const { drinkRecommendation } = useContext(MyContext);\n\n  const id = pathname.replace(/[^0-9]/g, '');\n\n  async function getFetchFoodApi() {\n    const resultsApi = await fetchFoodApi(`lookup.php?i=${id}`);\n    setRecipeFood(resultsApi.meals);\n    const ingredientsReturn = getIngredientsAndMeasure('9', '29', resultsApi.meals);\n    setIngredients(ingredientsReturn\n      .filter((element) => element[0].includes('strIngredient')\n    && element[1] !== null && element[1] !== ''));\n    const measuresReturn = getIngredientsAndMeasure('29', '48', resultsApi.meals);\n    setMeasure(measuresReturn.filter((element) => element[1] !== ' '));\n  }\n\n  function checkIsFavorite() {\n    setCheckFavorite(checkRecipeFavorite(id));\n  }\n\n  useEffect(() => {\n    getFetchFoodApi();\n\n    checkIsFavorite();\n  }, []);\n\n  function getVideo(url) {\n    const splitedUrl = url.split('v=')[1];\n    const videoUrl = `https://www.youtube.com/embed/${splitedUrl}`;\n    return videoUrl;\n  }\n\n  const redirectClick = (idRecipe) => {\n    history.push(`/foods/${idRecipe}/in-progress`);\n  };\n  function checkRecipe() {\n    const recipeName = recipeFood.length > 0 ? recipeFood[0].strMeal : '';\n    const inProgressStorage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const doneRecipeStorage = JSON.parse(localStorage.getItem('doneRecipes'));\n\n    if (doneRecipeStorage !== null) {\n      const filterDoneRecipe = doneRecipeStorage.filter(({ name }) => (\n        name === recipeName));\n      if (filterDoneRecipe.length > 0) {\n        return '';\n      }\n    }\n\n    if (inProgressStorage && inProgressStorage.meals && inProgressStorage.meals[id]) {\n      return (\n        <button\n          data-testid=\"start-recipe-btn\"\n          type=\"button\"\n          onClick={ () => redirectClick(id) }\n          className=\"button-recipe button-continue\"\n        >\n          Continue Recipe\n        </button>\n      );\n    }\n\n    return (\n      <button\n        data-testid=\"start-recipe-btn\"\n        type=\"button\"\n        onClick={ () => redirectClick(id) }\n        className=\"button-recipe button-start\"\n      >\n        Start recipe\n      </button>\n    );\n  }\n\n  function handleClick(idReceita) {\n    history.push(`/drinks/${idReceita}`);\n  }\n\n  function clipboardCopy(idLink) {\n    copy(`http://localhost:3000/foods/${idLink}`);\n    setCheckCopy(true);\n  }\n\n  function clickFavorite() {\n    if (checkFavorite) {\n      setCheckFavorite(false);\n      removeFavoriteRecipe(id);\n    } else {\n      setCheckFavorite(true);\n      setStorageFavoriteFood(recipeFood[0]);\n    }\n  }\n\n  return (\n    <div className=\"details-page-default\">\n      {recipeFood && recipeFood.map((recipe) => (\n        <div key={ recipe.idMeal }>\n          <img\n            data-testid=\"recipe-photo\"\n            src={ recipe.strMealThumb }\n            alt={ recipe.strMeal }\n            className=\"img-recipe\"\n          />\n          <div className=\"header-details-container\">\n            <h1 className=\"title-recipe\" data-testid=\"recipe-title\">\n              {recipe.strMeal}\n            </h1>\n            <div>\n              <button\n                data-testid=\"share-btn\"\n                type=\"button\"\n                className=\"icon-btn\"\n                onClick={ () => clipboardCopy(recipe.idMeal) }\n              >\n                <img src={ shareIcon } alt=\"share Icon\" />\n              </button>\n              <button\n                type=\"button\"\n                className=\"icon-btn\"\n                onClick={ clickFavorite }\n              >\n                <img\n                  data-testid=\"favorite-btn\"\n                  src={ checkFavorite\n                    ? blackHeartIcon : whiteHeartIcon }\n                  alt={ checkFavorite\n                    ? 'black Heart Icon\"' : 'white Heart Icon' }\n                />\n              </button>\n            </div>\n          </div>\n          <div className=\"details-recipe-container\">\n            <p className=\"category\" data-testid=\"recipe-category\">\n              {recipe.strCategory}\n            </p>\n            { checkCopy && (<p>Link copied!</p>)}\n            <h2 className=\"subtitles-recipe\">Ingredients:</h2>\n            <ul className=\"ingredients-list\">\n              {ingredients.length > 0 && measure.length > 0\n                  && ingredients.map((element, index) => (\n                    <li\n                      key={ Math.random() }\n                      data-testid={ `${index}-ingredient-name-and-measure` }\n                    >\n                      {'- '}\n                      <span className=\"ingredient-text\">{element[1]}</span>\n                      {' '}\n                      { measure[index] !== null\n                      && <span className=\"measure-text\">{measure[index][1]}</span>}\n                    </li>\n                  ))}\n            </ul>\n            <h2 className=\"subtitles-recipe\">Instructions</h2>\n            <div className=\"instructions-container\">\n              <p data-testid=\"instructions\" className=\"instructions-text\">\n                {recipe.strInstructions}\n              </p>\n            </div>\n            <iframe\n              data-testid=\"video\"\n              src={ getVideo(recipe.strYoutube) }\n              title={ recipe.idMeal }\n              width=\"340\"\n            />\n            <h2 className=\"subtitles-recipe\">Recommended</h2>\n            <div className=\"recommended-container\">\n              <div className=\"recommended-cards-container\">\n                { drinkRecommendation.map((drink, index) => (\n                  <div\n                    key={ drink.strDrink }\n                    data-testid={ `${index}-recomendation-card` }\n                    // link referencia: https://stackoverflow.com/questions/56441825/how-to-fix-button-interactive-role-must-be-focusable\n                    onClick={ () => handleClick(drink.idDrink) }\n                    onKeyDown={ handleClick }\n                    role=\"button\"\n                    tabIndex={ 0 }\n                    className=\"recommended-card\"\n                  >\n                    <img\n                      className=\"recommended-img\"\n                      data-testid={ `${index}-card-img` }\n                      src={ drink.strDrinkThumb }\n                      alt={ drink.strDrink }\n                    />\n                    <p className=\"recommended-category-text\">{drink.strAlcoholic}</p>\n                    <p\n                      className=\"recommended-text\"\n                      data-testid={ `${index}-recomendation-title` }\n                    >\n                      {' '}\n                      { drink.strDrink }\n                    </p>\n                  </div>\n                ))}\n              </div>\n            </div>\n            { checkRecipe() }\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\nexport default FoodsById;\n"]},"metadata":{},"sourceType":"module"}